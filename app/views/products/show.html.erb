<div class="flex w-full mx-auto md:w-2/3">
  <div class="mx-auto">
    <%= render 'shared/flash' if flash.any? %>
    <h1 class="mb-3 text-4xl font-bold">檢視商品</h1>
    <header>
      <div>
        <img src="https://fakeimg.pl/350x200/ff0000,128/000,255" class="w-full">
      </div>
    </header>
    <div>
      <p class="my-5">
        <strong class="block mb-1 font-medium">商品名稱:</strong>
        <%= @product.name %>
      </p>
      <p class="my-5">
        <strong class="block mb-1 font-medium">描述:</strong>
        <%= @product.description %>
      </p>
      <p class="my-5">
        <strong class="block mb-1 font-medium">價格:</strong>
        <%# @product.price %>
      </p>
      <p class="my-5">
        <strong class="block mb-1 font-medium">庫存:</strong>
        <%# @product.inventory %>
      </p>
      <p class="my-5">
        <strong class="block mb-1 font-medium">分類:</strong>
        <%# @product.category %>
      </p>
      <p class="my-5">
        <strong class="block mb-1 font-medium">商品狀態:</strong>
        <%# @product.status %>
      </p>
    </div>
    <%= link_to '編輯此商品', edit_product_path(@product), class: "mt-2 rounded-lg py-3 px-5 bg-gray-100 inline-block font-medium" %>
    <div class="inline-block ml-2">
      <%= button_to '刪除此商品', product_path(@product), method: :delete, class: "mt-2 rounded-lg py-3 px-5 bg-gray-100 font-medium" %>
    </div>
    <%= link_to '回到商品首頁', products_path, class: "ml-2 rounded-lg py-3 px-5 bg-gray-100 inline-block font-medium" %>
  </div>
</div>
<%# 喜歡功能 %>
<div data-controller="product--like" data-product-id="<%=@product.id%>" data-user-like="<%=current_user&.like_product?(@product)%>">
  <i class="fa-regular fa-heart fa-xl text-rose-600 hover:animate-bounce" data-action="click->product--like#like_product" data-product--like-target="heart"></i>
  <span>Like商品(<span data-product--like-target="amount"><%= @product.product_likes.count%></span>)</span>
</div>
<%# Comment %>
<div class="max-w-2xl mx-auto ">
  <%# 留言輸入區 %>
  <% if user_signed_in? %>
    <%= form_with model: @product_comment, url: product_comments_path(@product.id) do |f| %>
      <h2 class="m-1 text-lg font-bold">商品評價</h2>
      <div class="flex">
        <%= f.label "留下評論：", class: 'label'%>
        <div class="rating rating-md">
          <%= f.radio_button :rating, ProductComment.stars[:star_0], class: "comment-star-hidden" , checked: "checked" %>
          <%= f.radio_button :rating, ProductComment.stars[:star_1], class: "comment-star" %>
          <%= f.radio_button :rating, ProductComment.stars[:star_2], class: "comment-star" %>
          <%= f.radio_button :rating, ProductComment.stars[:star_3], class: "comment-star" %>
          <%= f.radio_button :rating, ProductComment.stars[:star_4], class: "comment-star" %>
          <%= f.radio_button :rating, ProductComment.stars[:star_5], class: "comment-star"%>
        </div>
      </div>
      <div class="flex items-end">
        <%= f.text_area :content, class: "textarea h-24 textarea-bordered bg-zinc-100 textarea-sm w-full max-w-xs"%>
        <%= f.submit "Send", class: "my-1 mx-2 bg-gray-200 font-bold hover:bg-stone-300 rounded py-1 px-2 text-sm h-7 cursor-pointer border-b-slate-300 border" %>
      </div>
    <% end %>
  <% end %>
  <%# 當前產品評論 %>
  <section>
    <h3 class="m-2">評論：</h3>
    <div id="comment-list">
      <%= render partial: 'comments/comment', collection: @product_comments, locals:{users: User.select(:id, :name)} %>
    </div>
  </section>
</div>
